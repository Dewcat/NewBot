# 🎮 高级伤害系统使用指南

## 🚨 新功能总览
我们已经实现了您要求的高级战斗系统，包括：
1. **伤害类型**：物理 ⚔️ 和 魔法 🔮
2. **角色抗性**：物理抗性和魔法抗性
3. **技能特攻**：对特定种族的额外伤害
4. **种族系统**：15种可选种族标签

## 📊 伤害计算公式
```
最终伤害 = 基础伤害 × 攻防修正 × 特攻加成 × (1 - 抗性减伤)
```

### 🎲 基础伤害
- 按原有骰子公式计算：如 `30+3d10`
- 不同技能有不同的伤害公式

### ⚔️🔮 伤害类型
- **物理伤害** ⚔️：受目标物理抗性影响
- **魔法伤害** 🔮：受目标魔法抗性影响

### 🛡️ 抗性系统
- 物理抗性：减少物理伤害
- 魔法抗性：减少魔法伤害
- 抗性范围：0% - 90%
- 抗性计算：30%抗性 = 减伤30%

### 🏷️ 种族特攻
某些技能对特定种族有额外伤害加成：
- 利刃封喉：对人类 +60% 伤害
- 链锯剑：对机械 +40% 伤害
- 碎片万段：对龙族 +100% 伤害
- 宠物狗斗：对野兽 +30% 伤害

## 🧬 可用种族标签
```
人类 (human)      精灵 (elf)        矮人 (dwarf)
兽人 (orc)        龙族 (dragon)     机械 (machine)
野兽 (beast)      不死族 (undead)   恶魔 (demon)
天使 (angel)      元素 (elemental)  构装体 (construct)
妖精 (fey)        巨人 (giant)      哥布林 (goblinoid)
```

## 🎯 使用方法

### 1. 设置角色种族和抗性
```
/race 艾丽丝
```
然后可以：
- 🏷️ 管理种族标签：选择多个种族
- 🛡️ 设置物理抗性：0% - 90%
- 🔮 设置魔法抗性：0% - 90%

### 2. 查看技能伤害类型
现有技能已自动更新伤害类型：
- **物理技能** ⚔️：不死鸟斩、阿拉斯工坊、快速压制、攻击、宠物狗斗、放松肌肉、再来再来！、链锯剑、镇压、纵斩、利刃封喉、入身尖刀
- **魔法技能** 🔮：蛐蛐、布雷泽工坊、净化（治疗）、碎片万段

### 3. 战斗示例
```
攻击者：艾丽丝 (攻击力15，使用"利刃封喉")
目标：鲍勃 (防御力10，人类种族，物理抗性30%)

计算过程：
1. 基础伤害：10+1d2 = 12点
2. 攻防修正：(15-10) × 2% = +10% → ×1.1 = 13.2
3. 特攻加成：对人类 +60% → ×1.6 = 21.1
4. 抗性减伤：物理抗性30% → ×0.7 = 14.8
最终伤害：15点

显示：⚔️ 物理伤害：基础: 10+1d2(2) → 攻防: ×1.10 → 特攻(人类): ×1.6 → 物理抗性: -30% → 最终: 15
```

## 🧪 测试建议

### 1. 创建测试角色
```
/cc 测试战士
/ce 测试法师
```

### 2. 设置不同属性
```
/race 测试战士
→ 种族：人类、战士
→ 物理抗性：50%
→ 魔法抗性：10%

/race 测试法师
→ 种族：精灵、法师
→ 物理抗性：10%
→ 魔法抗性：70%
```

### 3. 测试不同技能
```
/join 测试战士 测试法师
/attack
→ 用物理技能攻击法师（低物理抗性）
→ 用魔法技能攻击战士（低魔法抗性）
```

### 4. 观察伤害差异
- 物理技能对战士伤害较低（高物理抗性）
- 魔法技能对法师伤害较低（高魔法抗性）
- 特攻技能对相应种族伤害更高

## 💡 战术建议
1. **了解敌人**：查看对手的种族和抗性
2. **选择技能**：用魔法攻击低魔抗目标，用物理攻击低物抗目标
3. **种族克制**：利用特攻技能针对特定种族
4. **抗性配置**：为角色设置合适的抗性分配

## 🎉 系统优势
- **策略深度**：不再是简单的攻击，需要考虑类型克制
- **角色差异化**：每个角色都可以有独特的种族和抗性组合
- **技能价值**：特攻技能在特定情况下更有价值
- **平衡性**：抗性有上限，确保任何角色都不会完全免疫
