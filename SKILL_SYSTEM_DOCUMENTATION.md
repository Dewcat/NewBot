# æŠ€èƒ½ç³»ç»Ÿæ–‡æ¡£

## æ¦‚è¿°

æŠ€èƒ½ç³»ç»Ÿæ˜¯Dewbotæˆ˜æ–—ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œè´Ÿè´£å¤„ç†å„ç§ç±»å‹çš„æŠ€èƒ½æ•ˆæœã€ä¼¤å®³è®¡ç®—å’ŒçŠ¶æ€åº”ç”¨ã€‚ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒå¤šç§æŠ€èƒ½ç±»å‹å’Œå¤æ‚çš„ä¼¤å®³è®¡ç®—å…¬å¼ã€‚

## æ ¸å¿ƒç±»ï¼šSkillEffect

### ç±»ç»“æ„
```python
class SkillEffect(ABC):
    def execute(self, attacker, target, skill_info):
        # æ ¹æ®æŠ€èƒ½åˆ†ç±»é€‰æ‹©å¤„ç†æ–¹å¼
        skill_category = skill_info.get('skill_category', 'damage')
        
        if skill_category == 'healing':
            return self.execute_healing(attacker, target, skill_info)
        elif skill_category == 'buff':
            return self.execute_buff(attacker, target, skill_info)
        # ... å…¶ä»–æŠ€èƒ½ç±»å‹
```

### æŠ€èƒ½ç±»å‹åˆ†ç±»

#### 1. ä¼¤å®³æŠ€èƒ½ (damage)
**åŠŸèƒ½**ï¼šå¯¹ç›®æ ‡é€ æˆä¼¤å®³

**è¯¦ç»†è®¡ç®—å…¬å¼**ï¼š

æœ€ç»ˆä¼¤å®³è®¡ç®—éµå¾ªä»¥ä¸‹æµæ°´çº¿ï¼š

1.  **åŸºç¡€ä¼¤å®³ (Base Damage)**:
    *   `Dice Roll` (éª°å­ç»“æœ) + `Fixed Value` (å›ºå®šå€¼)
    *   *æ³¨æ„ï¼šè‹¥æ”»å‡»è€…å¤„äºéº»ç—¹çŠ¶æ€ï¼Œæ¯ä¸ªéº»ç—¹å±‚æ•°ä¼šä½¿ä¸€ä¸ªéª°å­ç»“æœå½’é›¶ã€‚*

2.  **è¿½åŠ ä¼¤å®³ (Additional Damage)**:
    *   æ¥è‡ªæŠ€èƒ½ç‰¹æ•ˆï¼ˆå¦‚ç¡¬è¡€æ¶ˆè€—ã€æ¡ä»¶å¢ä¼¤ï¼‰ã€‚
    *   `Total Base Damage` = `Base Damage` + `Additional Damage`

3.  **æ”»é˜²ä¿®æ­£ (Attack/Defense Modifier)**:
    *   `Modifier` = `Attacker.Attack` / `Target.Defense`

4.  **ç§æ—ç‰¹æ”» (Race Bonus)**:
    *   è‹¥æŠ€èƒ½æœ‰ `special_damage_tags` ä¸”å‘½ä¸­å¯¹åº”ç§æ—ã€‚
    *   `Bonus` = `Tag Multiplier` (ä¾‹å¦‚ 1.5 æˆ– 2.0)

5.  **æŠ—æ€§å‡å… (Resistance Reduction)**:
    *   æ ¹æ®ä¼¤å®³ç±»å‹ ('physical'/'magic') è¯»å–ç›®æ ‡æŠ—æ€§ã€‚
    *   `Reduction` = `1.0 - min(Target.Resistance, 0.9)`
    *   *å³æœ€å¤šå‡ä¼¤ 90%ï¼Œæœ€å°‘é€ æˆ 10% ä¼¤å®³ã€‚*

6.  **æ··ä¹±åŠ æˆ (Stagger Multiplier)**:
    *   è‹¥ç›®æ ‡å¤„äºæ··ä¹±çŠ¶æ€ã€‚
    *   `Multiplier` = `2.0`

**æœ€ç»ˆå…¬å¼**:
$$
FinalDamage = TotalBase \times \frac{Atk}{Def} \times RaceBonus \times ResistanceReduction \times StaggerMultiplier
$$
*(ç»“æœå‘ä¸‹å–æ•´ï¼Œä¸”æœ€å°ä¸º 1)*

**æ‰§è¡Œæµç¨‹**ï¼š
1. **è®¡ç®—åŸºç¡€ä¼¤å®³**
   - è§£æéª°å­å…¬å¼ï¼ˆå¦‚ "5+2d3"ï¼‰
   - è®¡ç®—è¿½åŠ ä¼¤å®³ï¼ˆé€šè¿‡æ•ˆæœç³»ç»Ÿï¼‰
   - åˆå¹¶åŸºç¡€ä¼¤å®³å’Œè¿½åŠ ä¼¤å®³

2. **åº”ç”¨æ”»å‡»è€…çŠ¶æ€æ•ˆæœä¿®æ­£**
   - è°ƒç”¨ `calculate_damage_modifiers(attacker_id, base_damage)`
   - å¤„ç†æš´å‡»ã€å¼ºå£®ç­‰å¢ä¼¤æ•ˆæœ

3. **åº”ç”¨ç›®æ ‡å—å‡»çŠ¶æ€æ•ˆæœ**
   - è°ƒç”¨ `process_hit_effects(target_id, modified_damage)`
   - å¤„ç†å®ˆæŠ¤ã€æŠ¤ç›¾ç­‰å‡ä¼¤æ•ˆæœ

4. **åº”ç”¨æœ€ç»ˆä¼¤å®³**
   - æ›´æ–°ç›®æ ‡ç”Ÿå‘½å€¼
   - è®°å½•æˆ˜æ–—æ—¥å¿—

5. **å¤„ç†æ··ä¹±å€¼**
   - ä¼¤å®³ç§¯ç´¯å¯èƒ½è§¦å‘æ··ä¹±çŠ¶æ€

6. **åº”ç”¨æŠ€èƒ½çŠ¶æ€æ•ˆæœ**
   - å¤„ç†æŠ€èƒ½é™„åŠ çš„buff/debuff

7. **å¤„ç†è¡ŒåŠ¨åæ•ˆæœ**
   - è§¦å‘æ”»å‡»è€…èº«ä¸Šçš„è¡ŒåŠ¨åçŠ¶æ€

8. **æ›´æ–°å†·å´æ—¶é—´**
   - å¢åŠ æŠ€èƒ½å†·å´è®¡æ•°

**è¿”å›å€¼**ï¼š
```python
{
    'total_damage': int,      # æ€»ä¼¤å®³å€¼
    'result_text': str,       # æˆ˜æ–—ç»“æœæ–‡æœ¬
    'target_health': int      # ç›®æ ‡å‰©ä½™ç”Ÿå‘½å€¼
}
```

#### 2. æ²»ç–—æŠ€èƒ½ (healing)
**åŠŸèƒ½**ï¼šæ¢å¤ç›®æ ‡ç”Ÿå‘½å€¼

**ç‰¹ç‚¹**ï¼š
- ä¸å—æ”»é˜²å’ŒæŠ—æ€§å½±å“
- å¯ä»¥ä½¿ç”¨éª°å­å…¬å¼è®¡ç®—æ²»ç–—é‡
- æ”¯æŒè‡ªæˆ‘æ²»ç–—å’Œé˜Ÿå‹æ²»ç–—

#### 3. å¢ç›ŠæŠ€èƒ½ (buff)
**åŠŸèƒ½**ï¼šä¸ºç›®æ ‡æ·»åŠ æ­£é¢çŠ¶æ€æ•ˆæœ

**ç‰¹ç‚¹**ï¼š
- ä¸é€ æˆä¼¤å®³
- ä¸»è¦ç”¨äºæ–½åŠ buffæ•ˆæœ
- æ”¯æŒå¤šç§buffç±»å‹ï¼ˆå¼ºå£®ã€å®ˆæŠ¤ã€æŠ¤ç›¾ç­‰ï¼‰

#### 4. å‡ç›ŠæŠ€èƒ½ (debuff)
**åŠŸèƒ½**ï¼šä¸ºç›®æ ‡æ·»åŠ è´Ÿé¢çŠ¶æ€æ•ˆæœ

**ç‰¹ç‚¹**ï¼š
- ä¸é€ æˆä¼¤å®³
- ä¸»è¦ç”¨äºæ–½åŠ debuffæ•ˆæœ
- æ”¯æŒå¤šç§debuffç±»å‹ï¼ˆè™šå¼±ã€æ˜“ä¼¤ã€ä¸­æ¯’ç­‰ï¼‰

#### 5. è‡ªæˆ‘æŠ€èƒ½ (self)
**åŠŸèƒ½**ï¼šåªå¯¹æ–½æ³•è€…ç”Ÿæ•ˆ

**ç‰¹ç‚¹**ï¼š
- ç›®æ ‡å§‹ç»ˆæ˜¯æ–½æ³•è€…è‡ªå·±
- å¸¸ç”¨äºè‡ªæˆ‘å¼ºåŒ–æˆ–ç‰¹æ®Šæ•ˆæœ

#### 6. èŒƒå›´æŠ€èƒ½ (AOE)
**åŠŸèƒ½**ï¼šå¯¹å¤šä¸ªç›®æ ‡åŒæ—¶ç”Ÿæ•ˆ

**å­ç±»å‹**ï¼š
- `aoe_damage`: å¯¹æ‰€æœ‰æ•Œæ–¹é€ æˆä¼¤å®³
- `aoe_healing`: å¯¹æ‰€æœ‰å‹æ–¹è¿›è¡Œæ²»ç–—
- `aoe_buff`: å¯¹æ‰€æœ‰å‹æ–¹æ–½åŠ å¢ç›Š
- `aoe_debuff`: å¯¹æ‰€æœ‰æ•Œæ–¹æ–½åŠ å‡ç›Š

## ä¼¤å®³è®¡ç®—ç³»ç»Ÿ

### éª°å­å…¬å¼è§£æ
**æ”¯æŒæ ¼å¼**ï¼š
- `"5+2d3"` â†’ åŸºç¡€å€¼5 + 2ä¸ª3é¢éª°å­
- `"1d6"` â†’ 1ä¸ª6é¢éª°å­
- `"10"` â†’ å›ºå®šå€¼10
- `"3d4+2"` â†’ 3ä¸ª4é¢éª°å­ + 2

**è§£æå‡½æ•°**ï¼š`parse_dice_formula(formula)`
**æŠ•æ·å‡½æ•°**ï¼š`roll_dice(num_dice, faces)`

### ä¼¤å®³ä¿®æ­£è®¡ç®—

#### 1. æ”»é˜²ä¿®æ­£
```python
def calculate_attack_defense_modifier(attacker_attack, target_defense):
    attack_defense_diff = attacker_attack - target_defense
    modifier = 1.0 + (attack_defense_diff * 0.02)  # æ¯å·®1ç‚¹æ”»é˜²ï¼Œä¼¤å®³å˜åŒ–2%
    return max(0.1, modifier)  # æœ€å°‘é€ æˆ10%ä¼¤å®³
```

#### 2. ç§æ—ç‰¹æ”»
```python
def calculate_race_bonus(special_damage_tags, target_race_tags):
    # æŠ€èƒ½ç‰¹æ”»æ ‡ç­¾å¦‚ {"human": 1.5, "dragon": 2.0}
    # ç›®æ ‡ç§æ—æ ‡ç­¾å¦‚ ["human", "warrior"]
    max_bonus = 1.0
    for race in target_race_tags:
        if race in special_damage_tags:
            bonus = special_damage_tags[race]
            max_bonus = max(max_bonus, bonus)
    return max_bonus
```

#### 3. æŠ—æ€§å‡ä¼¤
```python
def calculate_resistance_reduction(damage_type, target_resistances):
    resistance = target_resistances.get(damage_type, 0.0)
    reduction_multiplier = 1.0 - min(resistance, 0.9)  # æœ€å¤šå‡ä¼¤90%
    return max(0.1, reduction_multiplier)  # æœ€å°‘é€ æˆ10%ä¼¤å®³
```

#### 4. æ··ä¹±çŠ¶æ€åŠ æˆ
- æ··ä¹±çŠ¶æ€ä¸‹ä¼¤å®³æå‡è‡³200%
- é€šè¿‡ `stagger_manager.get_stagger_damage_multiplier()` è®¡ç®—
- **é‡ç½®è§„åˆ™**ï¼šæ··ä¹±å€¼å’Œæ··ä¹±çŠ¶æ€ä¼šåœ¨â€œé˜¶æ®µç»“æŸ (Stage End)â€å’Œâ€œæˆ˜æ–—ç»“æŸ (Battle End)â€æ—¶é‡ç½®ã€‚

### æœ€ç»ˆä¼¤å®³å…¬å¼
```
æœ€ç»ˆä¼¤å®³ = åŸºç¡€ä¼¤å®³ Ã— æ”»é˜²ä¿®æ­£ Ã— ç§æ—ç‰¹æ”» Ã— æŠ—æ€§å‡ä¼¤ Ã— æ··ä¹±åŠ æˆ
```

### éº»ç—¹çŠ¶æ€å¤„ç†
- éº»ç—¹çŠ¶æ€ä¸‹éª°å­ç»“æœå½’é›¶
- æ¯ä¸ªéº»ç—¹å±‚æ•°å¯ä½¿ä¸€ä¸ªéª°å­å½’é›¶
- æŠ•éª°åè‡ªåŠ¨å‡å°‘éº»ç—¹å±‚æ•°

## çŠ¶æ€æ•ˆæœåº”ç”¨

### æŠ€èƒ½çŠ¶æ€æ•ˆæœè¯¦è§£

**å‡½æ•°**ï¼š`apply_skill_status_effects(attacker, target, skill_info, main_effect_value)`

#### 1. å¢ç›Šæ•ˆæœ (Buffs)

| æ•ˆæœåç§° | ä»£ç æ ‡è¯† | å›¾æ ‡ | æ•ˆæœæè¿° | æŒç»­/è¡°å‡æœºåˆ¶ |
| :--- | :--- | :--- | :--- | :--- |
| **å¼ºå£®** | `strong` | ğŸ’ª | æ”»å‡»é€ æˆçš„æœ€ç»ˆä¼¤å®³å¢åŠ  `å¼ºåº¦ Ã— 10%`ã€‚ | å›åˆç»“æŸæ—¶æŒç»­æ—¶é—´ -1ã€‚ |
| **å‘¼å¸æ³•** | `breathing` | ğŸ« | æš´å‡»ç‡å¢åŠ  `å¼ºåº¦%`ã€‚è‹¥å› æ­¤è§¦å‘æš´å‡»ï¼Œé€ æˆ 120% ä¼¤å®³ã€‚ | å›åˆç»“æŸæ—¶æŒç»­æ—¶é—´ -1ã€‚ |
| **å®ˆæŠ¤** | `guard` | â˜‚ | å—åˆ°çš„æœ€ç»ˆä¼¤å®³å‡å°‘ `å¼ºåº¦ Ã— 10%`ã€‚ | å›åˆç»“æŸæ—¶æŒç»­æ—¶é—´ -1ã€‚ |
| **æŠ¤ç›¾** | `shield` | ğŸ›¡ï¸ | æŠµæŒ¡ç­‰åŒäºå¼ºåº¦çš„ä¼¤å®³ã€‚æŠµæŒ¡åå¼ºåº¦å‡å°‘ã€‚ | æŒç»­æ—¶é—´ä¸éšå›åˆå‡å°‘ï¼Œç›´åˆ°å¼ºåº¦è€—å°½æˆ–è¢«é©±æ•£ã€‚ |
| **åŠ é€Ÿ** | `haste` | ğŸš€ | ç«‹å³å¢åŠ  1 ç‚¹å½“å‰è¡ŒåŠ¨æ¬¡æ•°å’Œæ¯å›åˆè¡ŒåŠ¨ä¸Šé™ã€‚ | å›åˆç»“æŸæ—¶æŒç»­æ—¶é—´ -1ã€‚æ•ˆæœç»“æŸæ—¶æ‰£é™¤å¢åŠ çš„ä¸Šé™ã€‚ |

#### 2. å‡ç›Šæ•ˆæœ (Debuffs)

| æ•ˆæœåç§° | ä»£ç æ ‡è¯† | å›¾æ ‡ | æ•ˆæœæè¿° | æŒç»­/è¡°å‡æœºåˆ¶ |
| :--- | :--- | :--- | :--- | :--- |
| **çƒ§ä¼¤** | `burn` | ğŸ”¥ | å›åˆç»“æŸæ—¶å—åˆ° `å¼ºåº¦ Ã— 1` ç‚¹ä¼¤å®³ã€‚ | å›åˆç»“æŸæ—¶æŒç»­æ—¶é—´ -1ã€‚ |
| **ä¸­æ¯’** | `poison` | â˜ ï¸ | å›åˆç»“æŸæ—¶å—åˆ° `å½“å‰ç”Ÿå‘½å€¼ Ã— å¼ºåº¦%` ç‚¹ä¼¤å®³ (æœ€å°‘1ç‚¹)ã€‚ | å›åˆç»“æŸæ—¶æŒç»­æ—¶é—´ -1ã€‚ |
| **ç ´è£‚** | `rupture` | ğŸ’¥ | å—åˆ°æ”»å‡»æ—¶ï¼Œé¢å¤–å—åˆ° `å¼ºåº¦ Ã— 1` ç‚¹ä¼¤å®³ã€‚ | æ¯æ¬¡è§¦å‘åæŒç»­æ—¶é—´ -1 (ä¸éšå›åˆè‡ªåŠ¨å‡å°‘)ã€‚ |
| **æµè¡€** | `bleeding` | ğŸ©¸ | æ¯æ¬¡è¡ŒåŠ¨åï¼Œå—åˆ° `å¼ºåº¦ Ã— 1` ç‚¹ä¼¤å®³ã€‚ | æ¯æ¬¡è§¦å‘åæŒç»­æ—¶é—´ -1 (ä¸éšå›åˆè‡ªåŠ¨å‡å°‘)ã€‚ |
| **è™šå¼±** | `weak` | ğŸ˜µ | æ”»å‡»é€ æˆçš„æœ€ç»ˆä¼¤å®³å‡å°‘ `å¼ºåº¦ Ã— 10%`ã€‚ | å›åˆç»“æŸæ—¶æŒç»­æ—¶é—´ -1ã€‚ |
| **æ˜“ä¼¤** | `vulnerable` | ğŸ’” | å—åˆ°çš„æœ€ç»ˆä¼¤å®³å¢åŠ  `å¼ºåº¦ Ã— 10%`ã€‚ | å›åˆç»“æŸæ—¶æŒç»­æ—¶é—´ -1ã€‚ |
| **éº»ç—¹** | `paralysis` | âš¡ | æŠ•æ·ä¼¤å®³éª°å­æ—¶ï¼Œ`min(éª°å­æ•°, éº»ç—¹å±‚æ•°)` ä¸ªéª°å­ç»“æœå½’é›¶ã€‚ | æ¯æ¬¡å½’é›¶éª°å­åï¼Œå±‚æ•°(å¼ºåº¦)ç›¸åº”å‡å°‘ (ä¸éšå›åˆè‡ªåŠ¨å‡å°‘)ã€‚ |

#### 3. å…¶ä»–æ•ˆæœ (Other Effects)

| æ•ˆæœåç§° | ä»£ç æ ‡è¯† | æ•ˆæœæè¿° |
| :--- | :--- | :--- |
| **å†·å´ç¼©å‡** | `cooldown_reduction` | **ç«‹å³**å‡å°‘æ‰€æœ‰å¤„äºå†·å´ä¸­æŠ€èƒ½çš„å†·å´æ—¶é—´ `intensity` å›åˆã€‚è‹¥å†·å´å½’é›¶ï¼ŒæŠ€èƒ½ç«‹å³å¯ç”¨ã€‚ |
| **å¸è¡€** | `vampiric` | å°†é€ æˆä¼¤å®³çš„ `percentage`% è½¬åŒ–ä¸º**ç¡¬è¡€** (Hardblood) è€Œéç›´æ¥æ²»ç–—ã€‚ |
| **è‡ªæˆ‘ä¼¤å®³** | `self_damage` | æ–½æ³•è€…å—åˆ° `amount` æˆ– `percentage`% æ•ˆæœå€¼çš„åå™¬ä¼¤å®³ã€‚ |
| **è‡ªæˆ‘æ²»ç–—** | `self_heal` | æ–½æ³•è€…æ¢å¤ `amount` æˆ– `percentage`% æ•ˆæœå€¼çš„ç”Ÿå‘½å€¼ã€‚ |

#### 4. ç‰¹æ®Šæ•ˆæœ (Special Effects)

| æ•ˆæœåç§° | ä»£ç æ ‡è¯† | å›¾æ ‡ | æ•ˆæœæè¿° | æœºåˆ¶ |
| :--- | :--- | :--- | :--- | :--- |
| **ç¡¬è¡€** | `hardblood` | ğŸ©¸ | ç‰¹æ®Šèµ„æºæ± ï¼Œå¯è¢«ç‰¹å®šæŠ€èƒ½æ¶ˆè€—ä»¥å¢å¼ºä¼¤å®³ã€è·å¾—æŠ¤ç›¾æˆ–å¢å¼ºAOEã€‚ | æŒç»­æ—¶é—´æ— é™ï¼Œä»…é€šè¿‡æ¶ˆè€—å‡å°‘ã€‚ |
| **é»‘å¤œé¢†åŸŸ** | `dark_domain` | ğŸŒ‘ | 1. **å›åˆç»“æŸæ—¶**ï¼šè·å¾— 6çº§å¼ºå£®(1å›åˆ)ã€6çº§æ˜“ä¼¤(1å›åˆ)ã€1çº§åŠ é€Ÿ(ä¸‹å›åˆ)ã€666ç‚¹è´Ÿé¢æƒ…æ„Ÿç¡¬å¸ã€‚<br>2. **æ­»äº¡å…ç–«**ï¼šå…ç–«ä¸€æ¬¡è‡´æ­»ä¼¤å®³ï¼ˆè§¦å‘åç§»é™¤é¢†åŸŸï¼ŒHPå˜ä¸º1ï¼‰ã€‚<br>3. **æ¡ä»¶å¢ä¼¤**ï¼šå¢å¼ºç‰¹å®šæŠ€èƒ½ä¼¤å®³ã€‚ | æŒç»­ 3 å›åˆï¼Œå›åˆç»“æŸæ—¶æŒç»­æ—¶é—´ -1ã€‚ |
| **å‰Šå¼±å…‰ç¯** | `weaken_aura` | ğŸ’œ | **å›åˆç»“æŸæ—¶**ï¼šå¯¹æ‰€æœ‰æ•Œæ–¹æ–½åŠ  5çº§è™šå¼±(1å›åˆ) å’Œ 5çº§æ˜“ä¼¤(1å›åˆ)ã€‚ | æŒç»­ 5 å›åˆ (æ³¨: å½“å‰ä»£ç å®ç°ä¸­æš‚æ— è‡ªåŠ¨è¡°å‡)ã€‚ |

**æ•ˆæœé…ç½®æ ¼å¼**ï¼š
```json
{
  "buff": {
    "type": "strong",
    "intensity": 1,
    "duration": 3
  },
  "debuff": {
    "type": "poison",
    "intensity": 2,
    "duration": 2
  },
  "vampiric": {
    "percentage": 50
  },
  "self_damage": {
    "percentage": 10
  }
}
```

### AOEçŠ¶æ€æ•ˆæœ
**å‡½æ•°**ï¼š`apply_aoe_status_effects(attacker, targets, skill_info, is_friendly_skill)`

- å¯¹æ‰€æœ‰ç›®æ ‡ç»Ÿä¸€æ–½åŠ çŠ¶æ€æ•ˆæœ
- æ”¯æŒå‹æ–¹/æ•Œæ–¹åŒºåˆ†

## è‡ªæˆ‘æ•ˆæœå¤„ç†

### è‡ªæˆ‘ä¼¤å®³/æ²»ç–—
**å‡½æ•°**ï¼š`apply_self_effects(attacker, skill_info, effect_value, skill_type)`

- åŸºäºæŠ€èƒ½æ•ˆæœå€¼è®¡ç®—è‡ªæˆ‘å½±å“
- æ”¯æŒç™¾åˆ†æ¯”è®¡ç®—ï¼ˆå¦‚ä¼¤å®³çš„10%ä½œä¸ºè‡ªæˆ‘ä¼¤å®³ï¼‰

## å†·å´ç³»ç»Ÿ

### å†·å´æ—¶é—´ç®¡ç†
**æ›´æ–°å‡½æ•°**ï¼š`update_character_cooldowns(character_id, skill_id)`
- æŠ€èƒ½ä½¿ç”¨åå¢åŠ å†·å´è®¡æ•°
- æ¯å›åˆç»“æŸå‡å°‘æ‰€æœ‰æŠ€èƒ½å†·å´æ—¶é—´

**æ£€æŸ¥å‡½æ•°**ï¼š
- `is_skill_on_cooldown(character_id, skill_id)`
- `get_skill_cooldown_remaining(character_id, skill_id)`

## æƒ…æ„Ÿç¡¬å¸ç³»ç»Ÿé›†æˆ

### éª°å­æƒ…æ„Ÿç¡¬å¸
- æŠ•æ·ç»“æœä¸º1ï¼šè·å¾—è´Ÿé¢æƒ…æ„Ÿç¡¬å¸
- æŠ•æ·ç»“æœä¸ºæœ€å¤§å€¼ï¼šè·å¾—æ­£é¢æƒ…æ„Ÿç¡¬å¸

### ä¼¤å®³ç›¸å…³æƒ…æ„Ÿç¡¬å¸
- é€ æˆä¼¤å®³æ—¶è·å¾—æƒ…æ„Ÿç¡¬å¸
- å‡»æ€ç›®æ ‡æ—¶è·å¾—é¢å¤–æƒ…æ„Ÿç¡¬å¸

### æ²»ç–—ç›¸å…³æƒ…æ„Ÿç¡¬å¸
- è¿›è¡Œæ²»ç–—æ—¶è·å¾—æƒ…æ„Ÿç¡¬å¸

## ç‰¹æ®Šæ•ˆæœé›†æˆ

### æ•ˆæœç®¡ç†å™¨
- `effect_integration_manager.calculate_unified_damage()`
- å¤„ç†å¤æ‚çš„æŠ€èƒ½è¿½åŠ ä¼¤å®³å’Œç‰¹æ®Šæ•ˆæœ

### ç›®æ ‡è§£æå™¨
- `target_resolver.resolve_target()`
- æ”¯æŒå¤šç§ç›®æ ‡é€‰æ‹©é€»è¾‘ï¼ˆè‡ªèº«ã€æŠ€èƒ½ç›®æ ‡ã€å‹æ–¹ç­‰ï¼‰

## ä½¿ç”¨ç¤ºä¾‹

```python
from skill.skill_effects import skill_registry

# æ‰§è¡Œä¼¤å®³æŠ€èƒ½
result = skill_registry.execute(attacker, target, skill_info)
print(f"é€ æˆ {result['total_damage']} ç‚¹ä¼¤å®³")
print(result['result_text'])

# è®¡ç®—ä¼¤å®³ï¼ˆä¸æ‰§è¡Œæ•ˆæœï¼‰
damage = calculate_advanced_damage(skill, attacker, target)
print(f"é¢„ä¼°ä¼¤å®³: {damage[0]}")
```

## æ‰©å±•æ€§è®¾è®¡

### æ–°æŠ€èƒ½ç±»å‹æ·»åŠ 
1. åœ¨ `SkillEffect.execute()` ä¸­æ·»åŠ æ–°çš„ `elif` åˆ†æ”¯
2. å®ç°å¯¹åº”çš„ `execute_new_type()` æ–¹æ³•
3. æ›´æ–°æŠ€èƒ½æ•°æ®åº“ä¸­çš„ `skill_category` å­—æ®µ

### æ–°çŠ¶æ€æ•ˆæœæ·»åŠ 
1. åœ¨ `status_effects.py` ä¸­æ·»åŠ æ•ˆæœå¤„ç†é€»è¾‘
2. åœ¨æŠ€èƒ½æ•ˆæœé…ç½®ä¸­æ·»åŠ æ–°çš„æ•ˆæœç±»å‹
3. æ›´æ–°æ˜¾ç¤ºåç§°æ˜ å°„

### æ–°ä¼¤å®³ä¿®æ­£æ·»åŠ 
1. åœ¨ `damage_calculator.py` ä¸­æ·»åŠ æ–°çš„ä¿®æ­£å‡½æ•°
2. åœ¨ `calculate_advanced_damage_modular()` ä¸­é›†æˆæ–°çš„ä¿®æ­£
3. æ›´æ–°ä¼¤å®³è¯¦æƒ…æ˜¾ç¤ºé€»è¾‘</content>
<parameter name="filePath">e:\PythonWorkspace\NewBot\SKILL_SYSTEM_DOCUMENTATION.md